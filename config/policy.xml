<?xml version="1.0" encoding="UTF-8"?>
<!-- ImageMagick security policy configuration -->
<!-- This overrides the default restrictive policy to allow PDF processing -->
<policymap>
  <!-- Allow reading and writing PDF files -->
  <policy domain="coder" rights="read|write" pattern="PDF" />
  
  <!-- Allow reading and writing PostScript files (sometimes needed for PDF conversion) -->
  <policy domain="coder" rights="read|write" pattern="PS" />
  <policy domain="coder" rights="read|write" pattern="PS2" />
  <policy domain="coder" rights="read|write" pattern="PS3" />
  <policy domain="coder" rights="read|write" pattern="EPS" />
  
  <!-- Set reasonable resource limits to prevent DOS attacks -->
  <policy domain="resource" name="memory" value="1GB"/>
  <policy domain="resource" name="map" value="2GB"/>
  <policy domain="resource" name="disk" value="2GB"/>
  <policy domain="resource" name="file" value="768"/>
  <policy domain="resource" name="thread" value="4"/>
  <policy domain="resource" name="time" value="120"/>
  
  <!-- Allow processing of images up to reasonable dimensions -->
  <policy domain="resource" name="width" value="16KP"/>
  <policy domain="resource" name="height" value="16KP"/>
  <policy domain="resource" name="area" value="128MB"/>
</policymap>